<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tic Tac Toe Game - Hard AI</title>
    <style>
        * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    background-color: #F1F2F6;
    font-family: 'Arial', sans-serif;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    color: #2C3E50;
}

#container {
    text-align: center;
    width: 400px;
    height: 500px;
    padding: 20px;
    background-color: #ECF0F1;
    border-radius: 15px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    display: flex;
    flex-direction: column;
    justify-content: center;
}

#game-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    grid-gap: 15px;
    margin: 20px 0;
}

.cell {
    background-color: #34495E;
    color: #ECF0F1;
    font-size: 3em;
    width: 100px;
    height: 100px;
    display: flex;
    justify-content: center;
    align-items: center;
    border-radius: 10px;
    cursor: pointer;
    transition: all 0.3s ease;
}

.cell:hover {
    background-color: #16A085;
    transform: scale(1.1);
}

.cell.selected {
    background-color: #E74C3C;
    transform: scale(0.95);
}

#game-over {
    display: none; /* Hide the game over screen initially */
    color: #FFF;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: rgba(0, 0, 0, 0.7);
    display: flex;
    justify-content: center;
    align-items: center;
    flex-direction: column;
    font-size: 2em;
}


#game-end-message {
    font-size: 2.5em;
    font-weight: bold;
    margin-bottom: 20px;
}

#game-reset-btn {
    background-color: #E67E22;
    color: #FFF;
    padding: 15px 30px;
    font-size: 1.5em;
    border-radius: 10px;
    border: none;
    cursor: pointer;
    transition: background-color 0.3s ease;
}

#game-reset-btn:hover {
    background-color: #D35400;
}

#game-reset-btn:active {
    transform: scale(0.98);
}

#game-reset-btn:focus {
    outline: none;
}

#game-end-message {
    text-align: center;
    font-size: 2.5em;
    font-weight: bold;
    margin-bottom: 30px;
}
/* <!-- <link rel="stylesheet" href="style.css"> --> */

    </style>
</head>
<body>

<div id="container">
    <div id="game-grid">
        <!-- 9 Cells for the Tic Tac Toe board -->
        <div class="cell" id="cell-0"></div>
        <div class="cell" id="cell-1"></div>
        <div class="cell" id="cell-2"></div>
        <div class="cell" id="cell-3"></div>
        <div class="cell" id="cell-4"></div>
        <div class="cell" id="cell-5"></div>
        <div class="cell" id="cell-6"></div>
        <div class="cell" id="cell-7"></div>
        <div class="cell" id="cell-8"></div>
    </div>

    <div id="game-over">
        <div id="game-end-message">Game Over! <br> It's a Draw!</div>
        <button id="game-reset-btn">Restart Game</button>
    </div>
</div>

<script>
   let gameBoard = ['', '', '', '', '', '', '', '', '']; // Empty board at the start
let currentPlayer = 'X'; // X starts first
let gameOver = false; // Initially, the game is not over

// Function to initialize/reset the game
function startGame() {
    gameBoard = ['', '', '', '', '', '', '', '', '']; // Reset the board to empty
    currentPlayer = 'X'; // Start with player X
    gameOver = false; // Game is not over at the start

    // Reset all cells in the UI
    const cells = document.querySelectorAll('.cell');
    cells.forEach(cell => {
        cell.textContent = '';
        cell.classList.remove('selected', 'cell-win');
    });

    // Hide the "Game Over" screen initially
    document.getElementById('game-over').style.display = 'none';
}

// Function to check for a winner or draw
function checkWinner() {
    const winPatterns = [
        [0, 1, 2], [3, 4, 5], [6, 7, 8], // Rows
        [0, 3, 6], [1, 4, 7], [2, 5, 8], // Columns
        [0, 4, 8], [2, 4, 6] // Diagonals
    ];

    // Check all win patterns
    for (let pattern of winPatterns) {
        const [a, b, c] = pattern;
        if (gameBoard[a] && gameBoard[a] === gameBoard[b] && gameBoard[a] === gameBoard[c]) {
            document.getElementById('game-over').style.display = 'flex'; // Show game over screen
            document.getElementById('game-end-message').textContent = `${currentPlayer} wins!`; // Display winner
            gameOver = true;
            return;
        }
    }

    // Check for draw (no more moves available and no winner)
    if (!gameBoard.includes('')) {
        document.getElementById('game-over').style.display = 'flex'; // Show game over screen
        document.getElementById('game-end-message').textContent = "It's a draw!"; // Display draw message
        gameOver = true;
    }
}

// Function to handle player move
function playerMove(cell, index) {
    if (gameOver || gameBoard[index] !== '') return; // No move if game is over or cell is already filled
    gameBoard[index] = currentPlayer;
    cell.textContent = currentPlayer;

    // Check if the current player has won or the game is a draw
    checkWinner();

    // Switch to the other player
    currentPlayer = currentPlayer === 'X' ? 'O' : 'X';

    // If it's AI's turn, call the AI to make a move
    if (currentPlayer === 'O' && !gameOver) {
        aiMove();
    }
}

// AI move - Minimax Algorithm with Alpha-Beta Pruning
function aiMove() {
    let bestScore = -Infinity;
    let move;

    for (let i = 0; i < gameBoard.length; i++) {
        if (gameBoard[i] === '') {
            gameBoard[i] = 'O'; // AI plays 'O'
            let score = minimax(gameBoard, 0, false, -Infinity, Infinity); // Alpha-Beta Pruning
            gameBoard[i] = ''; // Reset the move
            if (score > bestScore) {
                bestScore = score;
                move = i;
            }
        }
    }

    // Make the AI's best move
    gameBoard[move] = 'O';
    document.querySelectorAll('.cell')[move].textContent = 'O';

    // Check if AI wins after making the move
    checkWinner();

    // Switch to the player's turn
    currentPlayer = 'X';
}

// Minimax Algorithm with Alpha-Beta Pruning
function minimax(board, depth, isMaximizing, alpha, beta) {
    const scores = { 'X': -1, 'O': 1, 'draw': 0 };

    // Check if the game is over (winner or draw)
    const winner = checkWinnerMinimax(board);
    if (winner !== null) {
        return scores[winner];
    }

    if (isMaximizing) {
        let bestScore = -Infinity;
        for (let i = 0; i < board.length; i++) {
            if (board[i] === '') {
                board[i] = 'O'; // AI plays 'O'
                let score = minimax(board, depth + 1, false, alpha, beta);
                board[i] = ''; // Reset the move
                bestScore = Math.max(score, bestScore);
                alpha = Math.max(alpha, bestScore); // Update alpha
                if (beta <= alpha) {
                    break; // Beta pruning
                }
            }
        }
        return bestScore;
    } else {
        let bestScore = Infinity;
        for (let i = 0; i < board.length; i++) {
            if (board[i] === '') {
                board[i] = 'X'; // Player plays 'X'
                let score = minimax(board, depth + 1, true, alpha, beta);
                board[i] = ''; // Reset the move
                bestScore = Math.min(score, bestScore);
                beta = Math.min(beta, bestScore); // Update beta
                if (beta <= alpha) {
                    break; // Alpha pruning
                }
            }
        }
        return bestScore;
    }
}

// Check the winner for Minimax (returns 'X', 'O', or 'draw')
function checkWinnerMinimax(board) {
    const winPatterns = [
        [0, 1, 2], [3, 4, 5], [6, 7, 8], // Rows
        [0, 3, 6], [1, 4, 7], [2, 5, 8], // Columns
        [0, 4, 8], [2, 4, 6] // Diagonals
    ];

    // Check all win patterns
    for (let pattern of winPatterns) {
        const [a, b, c] = pattern;
        if (board[a] && board[a] === board[b] && board[a] === board[c]) {
            return board[a]; // Return the winner ('X' or 'O')
        }
    }

    // Check for draw
    if (!board.includes('')) {
        return 'draw';
    }

    // Game is still ongoing
    return null;
}

// Add event listeners to each cell
const cells = document.querySelectorAll('.cell');
cells.forEach((cell, index) => {
    cell.addEventListener('click', () => playerMove(cell, index));
});

// Add event listener for the reset button
document.getElementById('game-reset-btn').addEventListener('click', startGame);

// Initialize the game when the page loads
window.onload = startGame;

</script>

</body>
</html>
